<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>
  </head>
  <body>
    <div id="vis" />
    <script>
      const spec = {
        $schema: "https://vega.github.io/schema/vega-lite/v4.json",
        width: 500,
        height: 300,
        title: "Total COVID-19 Cases in the US(28/03/2020)",
        data: {
          url: "data/us-10m.json",
          format: {
            type: "topojson",
            feature: "states",
          },
        },
        transform: [
          {
            lookup: "id",
            from: {
              data: {
                url: "https://gist.githubusercontent.com/hawleylin/af2a0c278cc60bc2e2157bb3b4a542e7/raw/cec79cbebf7f5c8ff1a741892d1535374972db8b/covid19-us-states-0328.csv",
              },
              key: "fips",
              fields: ["cases", "deaths", "state"],
            },
          },
        ],
        projection: { type: "albersUsa" },
        mark: "geoshape",
        encoding: {
          color: {
            field: "cases",
            type: "quantitative",
            scale: { scheme: "lighttealblue" },
          },
        },
      };
      vegaEmbed("#vis", spec, { mode: "vega-lite" })
        .then(console.log)
        .catch(console.warn);
    </script>
  </body>
</html>
